<ion-header>
    <ion-toolbar class="toolbar-color1">
        <ion-row>
            <ion-col size='4'>
                <div class="rao_logo" routerLink="/home/dashboard">
                    <ion-img src="../../assets/images/raoinfotech-logo.png" class="logo_img"></ion-img>
                </div>
                <img src="../../../assets/images/dashboard.png" alt="meter">
            </ion-col>
            <ion-col size='4'>
                <div class="middle_sec text-center">
                    <span>Leave Tracking</span>
                </div>
            </ion-col>
            <ion-col size='4'>
                <div class="icon_sec">
                    <img src="../../../assets/images/notification.png" routerLink="/home/notification" class="mr-3"
                        alt="notification">
                    <!-- <span>1</span> -->
                    <img src="../../../assets/images/log_out.png" (click)="logout()" alt="logout button">
                </div>
            </ion-col>
        </ion-row>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div class="loader" *ngIf="loading">
        <img class="loading_img" src="../../assets/images/loader.gif" />
    </div>
    <div *ngIf="pendingLeavesCount == 0" class="noPendingLeaves">
        <p>No pending leaves currently!</p>
    </div>
    <div class="tracking_list_card" *ngIf="pendingLeaves">
        <div class="card" style="cursor: pointer;" *ngFor="let leaves of pendingLeaves; let i = index">
            <div class="card-content  w-100 pending_leaves">
                <div class="row m-0">
                    <div class="col-3">
                        <div class="profile_div">
                            <div class="image_profile">
                                <img class="circle-ronded" *ngIf="!leaves.userId.profilePhoto"
                                    src="../../assets/images/person.png">
                                <img *ngIf="leaves.userId.profilePhoto" src="{{path}}{{leaves.userId.profilePhoto}}">
                            </div>
                        </div>
                    </div>
                    <div class="col-9 p-0">
                        <div class="application_detail">
                            <h2 class="name">{{leaves.userId.name}}</h2>
                            <p class="sub_text">{{leaves.reason}}</p>
                            <div class="row m-0">
                                <div class="col-7 p-0">
                                    <p class="details_heading">Applied For Leaves</p>
                                </div>
                                <div class="col-5 p-0">
                                    <p class="details_heading">Date</p>
                                </div>
                            </div>
                            <div class="row m-0">
                                <div class="col-7 p-0">
                                    <p class="leave_date_day">{{leaves.noOfDays}} days
                                    </p>
                                </div>
                                <div class="col-5 p-0">
                                    <p class="leave_date_day">
                                        <span class="leave_date_day_out_of" *ngIf="leaves.toDate == 'null'">
                                            {{leaves.fromDate.date}}/{{leaves.fromDate.month}}
                                        </span>
                                        <span class="leave_date_day_out_of" *ngIf="leaves.toDate != 'null'">
                                            {{leaves.fromDate.date}}/{{leaves.fromDate.month}} -
                                            {{leaves.toDate.date}}/{{leaves.toDate.month}}
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row m-0">
                    <div class="col-3"></div>
                    <div class="col-9 p-0">
                        <div class="row m-0">
                            <div class="button_group">
                                <button class="btn approve_btn"
                                    (click)="leaveApproval(leaves._id,'Approved')">Approve</button>
                                <button class="btn reject_btn"
                                    (click)="leaveApproval(leaves._id,'Rejected')">Reject</button>
                                <button type="button" class="btn details_btn" id="open-modal"
                                    (click)="openModal(i)">Details</button>
                                <div class="modal_content_with_overlay" id="open-modal-body{{i}}"
                                    style="display: none;">
                                    <div class="modal_body">
                                        <div class="modal_header">
                                            <div class="leave_reason">
                                                <div class="row m-0">
                                                    <img class="leave_image" src="../../assets/images/leave_reason.png">
                                                    <p class="leave_titles">Reason For Leave</p>
                                                </div>
                                                <p class="leave_reason_text">{{leaves.reason}}</p>
                                            </div>
                                        </div>

                                        <div class="leave_dates">
                                            <div class="row m-0">
                                                <img class="leave_image" src="../../assets/images/leave_date.png">
                                                <p class="leave_titles">Leave Dates</p>
                                            </div>
                                            <span class="leave_date_text" *ngIf="leaves.toDate == 'null'">
                                                {{leaves.fromDate.date}}/{{leaves.fromDate.month}}
                                            </span>
                                            <span class="leave_date_text" *ngIf="leaves.toDate != 'null'">
                                                {{leaves.fromDate.date}}/{{leaves.fromDate.month}} -
                                                {{leaves.toDate.date}}/{{leaves.toDate.month}}
                                            </span>
                                        </div>
                                        <div class="row m-0">
                                            <button type="button" class="btn close_btn"
                                                (click)="closeModal(i)">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ion-content>